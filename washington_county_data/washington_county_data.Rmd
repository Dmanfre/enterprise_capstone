---
title: "washington_county_data"
author: "Dylan Manfre"
date: "2023-02-24"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}
#libraries
library(tidyverse)
library(tidycensus)
library(janitor)
library(lubridate)




```

```{r}

rm(list = "baker_contribs", "baker_expenses", "new_gop_expenses", "pa_dem_contribs", "pa_dem_expenses", "pa_gop_contribs", "pa_gop_expesnes", "wbb_rosters")

rm(list = "ACS_5", "htown_2015", "htown_2019", "medi_14", "pa_gop_expenses")


rm(list = "hppop_15")

```


```{r}

Sys.setenv(CENSUS_API_KEY = "5cb2b9c628a1d1329c5bf4d36fe4435c6501efc8", overwrite = TRUE)


```

```{r}
ACS_5 <- load_variables(2020, "acs5")
#What is the difference between the ACS and the ACS5?
```


```{r}
#Median family income in last 12 months for 4 person household
get_acs(geography = "place",
              variables = c(medincome_4pers = "B19119_004"),
              state = "MD",
              year = 2021) %>% 
  filter(NAME == "Hagerstown city, Maryland")




#use acs1 to try and get each year... might be a state source. 

#This number is only for 2020? How far back do you think would be good to go
#I think this may be the correct variable but I'm not sure at the moment.
```

```{r}

# is using acs 5'
#when writing this make it say that these numbers are based on five-year rolling averages...

#This data is for Hagerstown
htown_2015 <- get_acs(geography = "place",
              variables = c(medi_house_income = "B19013_001"),
              state = "MD",
              year = 2015) %>% 
  filter(NAME == "Hagerstown city, Maryland") %>% 
  mutate(year = 2015)


htown_2016 <- get_acs(geography = "place",
              variables = c(medi_house_income = "B19013_001"),
              state = "MD",
              year = 2016) %>% 
  filter(NAME == "Hagerstown city, Maryland") %>% 
  mutate(year = 2016)


htown_2017 <- get_acs(geography = "place",
              variables = c(medi_house_income = "B19013_001"),
              state = "MD",
              year = 2017) %>% 
  filter(NAME == "Hagerstown city, Maryland") %>% 
  mutate(year = 2017)

htown_2018 <- get_acs(geography = "place",
              variables = c(medi_house_income = "B19013_001"),
              state = "MD",
              year = 2018) %>% 
  filter(NAME == "Hagerstown city, Maryland") %>% 
  mutate(year = 2018)


htown_2019 <- get_acs(geography = "place",
              variables = c(medi_house_income = "B19013_001"),
              state = "MD",
              year = 2019) %>% 
  filter(NAME == "Hagerstown city, Maryland") %>% 
  mutate(year = 2019)


htown_2020 <- get_acs(geography = "place",
              variables = c(medi_house_income = "B19013_001"),
              state = "MD",
              year = 2020) %>% 
  filter(NAME == "Hagerstown city, Maryland") %>% 
  mutate(year = 2020)

htown_2021 <- get_acs(geography = "place",
              variables = c(medi_house_income = "B19013_001"),
              state = "MD",
              year = 2021) %>% 
  filter(NAME == "Hagerstown city, Maryland") %>% 
  mutate(year = 2021)





```

```{r}
#This data is for frederick
fred_2015 <- get_acs(geography = "place",
              variables = c(medi_house_income = "B19013_001"),
              state = "MD",
              year = 2015) %>% 
  filter(NAME == "Frederick city, Maryland") %>% 
  mutate(year = 2015)


fred_2016 <- get_acs(geography = "place",
              variables = c(medi_house_income = "B19013_001"),
              state = "MD",
              year = 2016) %>% 
  filter(NAME == "Frederick city, Maryland") %>% 
  mutate(year = 2016)


fred_2017 <- get_acs(geography = "place",
              variables = c(medi_house_income = "B19013_001"),
              state = "MD",
              year = 2017) %>% 
  filter(NAME == "Frederick city, Maryland") %>% 
  mutate(year = 2017)

fred_2018 <- get_acs(geography = "place",
              variables = c(medi_house_income = "B19013_001"),
              state = "MD",
              year = 2018) %>% 
  filter(NAME == "Frederick city, Maryland") %>% 
  mutate(year = 2018)


fred_2019 <- get_acs(geography = "place",
              variables = c(medi_house_income = "B19013_001"),
              state = "MD",
              year = 2019) %>% 
  filter(NAME == "Frederick city, Maryland") %>% 
  mutate(year = 2019)


fred_2020 <- get_acs(geography = "place",
              variables = c(medi_house_income = "B19013_001"),
              state = "MD",
              year = 2020) %>% 
  filter(NAME == "Frederick city, Maryland") %>% 
  mutate(year = 2020)

fred_2021 <- get_acs(geography = "place",
              variables = c(medi_house_income = "B19013_001"),
              state = "MD",
              year = 2021) %>% 
  filter(NAME == "Frederick city, Maryland") %>% 
  mutate(year = 2021)


```
```{r}
#binding the rows together
#hagerstown
htown_medi_house_income <-  bind_rows(htown_2015, htown_2016, htown_2017, htown_2018, htown_2019, htown_2020, htown_2021)

fred_medi_house_income <- bind_rows(fred_2015, fred_2016, fred_2017, fred_2018, fred_2019, fred_2020, fred_2021)


write_csv(htown_medi_house_income, file = "htown_medi_house_income.csv")

write_csv(htown_medi_house_income, file = "fred_medi_house_income.csv")
```


```{r}
### Trying to get poverty data####

B17001_001 #POVERTY STATUS IN THE PAST 12 MONTHS BY SEX BY AGE

get_acs(geography = "place",
              variables = c(poverty_status = "B17001_001"),
              state = "MD",
              year = 2021) %>% 
  filter(NAME == "Hagerstown city, Maryland") %>% 
  mutate(year = 2021)
```


```{r}
## Total Population in Hagerstown and Frederick


#beginning w Hagerstown
```

```{r}
hpop_10 <-  get_acs(geography = "place",
              variables = c(population = "B01003_001"),
              state = "MD",
              year = 2010) %>% 
  filter(NAME == "Hagerstown city, Maryland") %>% 
  mutate(year = 2010)

hpop_11 <-get_acs(geography = "place",
              variables = c(population = "B01003_001"),
              state = "MD",
              year = 2011) %>% 
  filter(NAME == "Hagerstown city, Maryland") %>% 
  mutate(year = 2011)

hpop_12 <- get_acs(geography = "place",
              variables = c(population = "B01003_001"),
              state = "MD",
              year = 2012) %>% 
  filter(NAME == "Hagerstown city, Maryland") %>% 
  mutate(year = 2012)

hpop_13 <- get_acs(geography = "place",
              variables = c(population = "B01003_001"),
              state = "MD",
              year = 2013) %>% 
  filter(NAME == "Hagerstown city, Maryland") %>% 
  mutate(year = 2013)

hpop_14 <- get_acs(geography = "place",
              variables = c(population = "B01003_001"),
              state = "MD",
              year = 2014) %>% 
  filter(NAME == "Hagerstown city, Maryland") %>% 
  mutate(year = 2014)

hpop_15 <- get_acs(geography = "place",
              variables = c(population = "B01003_001"),
              state = "MD",
              year = 2015) %>% 
  filter(NAME == "Hagerstown city, Maryland") %>% 
  mutate(year = 2015)

hpop_16 <- get_acs(geography = "place",
              variables = c(population = "B01003_001"),
              state = "MD",
              year = 2016) %>% 
  filter(NAME == "Hagerstown city, Maryland") %>% 
  mutate(year = 2016)

hpop_17 <-get_acs(geography = "place",
              variables = c(population = "B01003_001"),
              state = "MD",
              year = 2017) %>% 
  filter(NAME == "Hagerstown city, Maryland") %>% 
  mutate(year = 2017)

hpop_18 <- get_acs(geography = "place",
              variables = c(population = "B01003_001"),
              state = "MD",
              year = 2018) %>% 
  filter(NAME == "Hagerstown city, Maryland") %>% 
  mutate(year = 2018)

hpop_19 <- get_acs(geography = "place",
              variables = c(population = "B01003_001"),
              state = "MD",
              year = 2019) %>% 
  filter(NAME == "Hagerstown city, Maryland") %>% 
  mutate(year = 2019)


hpop_20 <- get_acs(geography = "place",
              variables = c(population = "B01003_001"),
              state = "MD",
              year = 2020) %>% 
  filter(NAME == "Hagerstown city, Maryland") %>% 
  mutate(year = 2020)

hpop_21 <- get_acs(geography = "place",
              variables = c(population = "B01003_001"),
              state = "MD",
              year = 2021) %>% 
  filter(NAME == "Hagerstown city, Maryland") %>% 
  mutate(year = 2021)

```

```
```{r}

fred_10 <-  get_acs(geography = "place",
              variables = c(population = "B01003_001"),
              state = "MD",
              year = 2010) %>% 
  filter(NAME == "Frederick city, Maryland") %>% 
  mutate(year = 2010)

fred_11 <-get_acs(geography = "place",
              variables = c(population = "B01003_001"),
              state = "MD",
              year = 2011) %>% 
  filter(NAME == "Frederick city, Maryland") %>% 
  mutate(year = 2011)

fred_12 <- get_acs(geography = "place",
              variables = c(population = "B01003_001"),
              state = "MD",
              year = 2012) %>% 
  filter(NAME == "Frederick city, Maryland") %>% 
  mutate(year = 2012)

fred_13 <- get_acs(geography = "place",
              variables = c(population = "B01003_001"),
              state = "MD",
              year = 2013) %>% 
  filter(NAME == "Frederick city, Maryland") %>% 
  mutate(year = 2013)

fred_14 <- get_acs(geography = "place",
              variables = c(population = "B01003_001"),
              state = "MD",
              year = 2014) %>% 
  filter(NAME == "Frederick city, Maryland") %>% 
  mutate(year = 2014)

fred_15 <- get_acs(geography = "place",
              variables = c(population = "B01003_001"),
              state = "MD",
              year = 2015) %>% 
  filter(NAME == "Frederick city, Maryland") %>% 
  mutate(year = 2015)

fred_16 <- get_acs(geography = "place",
              variables = c(population = "B01003_001"),
              state = "MD",
              year = 2016) %>% 
  filter(NAME == "Frederick city, Maryland") %>% 
  mutate(year = 2016)

fred_17 <-get_acs(geography = "place",
              variables = c(population = "B01003_001"),
              state = "MD",
              year = 2017) %>% 
  filter(NAME == "Frederick city, Maryland") %>% 
  mutate(year = 2017)

fred_18 <- get_acs(geography = "place",
              variables = c(population = "B01003_001"),
              state = "MD",
              year = 2018) %>% 
  filter(NAME == "Frederick city, Maryland") %>% 
  mutate(year = 2018)

fred_19 <- get_acs(geography = "place",
              variables = c(population = "B01003_001"),
              state = "MD",
              year = 2019) %>% 
  filter(NAME == "Frederick city, Maryland") %>% 
  mutate(year = 2019)


fred_20 <- get_acs(geography = "place",
              variables = c(population = "B01003_001"),
              state = "MD",
              year = 2020) %>% 
  filter(NAME == "Frederick city, Maryland") %>% 
  mutate(year = 2020)

fred_21 <- get_acs(geography = "place",
              variables = c(population = "B01003_001"),
              state = "MD",
              year = 2021) %>% 
  filter(NAME == "Frederick city, Maryland") %>% 
  mutate(year = 2021)



```



```{r}
##Binding the rows 

htown_pop <-  bind_rows(hpop_10, hpop_11, hpop_12, hpop_13, hpop_14, hpop_15, hpop_16, hpop_17, hpop_18, hpop_19, hpop_20, hpop_21)

fred_pop <-  bind_rows(fred_10, fred_11, fred_12, fred_13, fred_14, fred_15, fred_16, fred_17, fred_18, fred_19, fred_20, fred_21)

```

