---
title: "washington_county_data"
author: "Dylan Manfre"
date: "2023-02-24"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}
#libraries
library(tidyverse)
library(tidycensus)
library(janitor)
library(lubridate)

```

```{r}

rm(list = "baker_contribs", "baker_expenses", "new_gop_expenses", "pa_dem_contribs", "pa_dem_expenses", "pa_gop_contribs", "pa_gop_expesnes", "wbb_rosters")

rm(list = "ACS_5", "htown_2015", "htown_2019", "medi_14", "pa_gop_expenses")


rm(list = "hppop_15")

```


```{r}

# Load Census API key

Sys.setenv(CENSUS_API_KEY = "5cb2b9c628a1d1329c5bf4d36fe4435c6501efc8", overwrite = TRUE)


```

```{r}

#Load ACS crosswalk

ACS_5 <- load_variables(2020, "acs5")
#What is the difference between the ACS and the ACS5?

# List of MD cities
md_cities <- get_acs(geography = "place",
              variables = c(medi_house_income = "B19013_001"),
              state = "MD")

```


```{r}
# is using acs 5'
#when writing this make it say that these numbers are based on five-year rolling averages...

#MEDIAN HOUSEHOLD INCOME

#Hagerstown - likely need 2021
  
h_income_2015 <- get_acs(geography = "place",
              variables = c(medi_house_income = "B19013_001"),
              state = "MD",
              year = 2015) %>% 
  #filter(NAME == "Hagerstown city, Maryland") %>% 
  mutate(year = 2015)

h_income_2016 <- get_acs(geography = "place",
              variables = c(medi_house_income = "B19013_001"),
              state = "MD",
              year = 2016) %>% 
  filter(NAME == "Hagerstown city, Maryland") %>% 
  mutate(year = 2016)

h_income_2017 <- get_acs(geography = "place",
              variables = c(medi_house_income = "B19013_001"),
              state = "MD",
              year = 2017) %>% 
  filter(NAME == "Hagerstown city, Maryland") %>% 
  mutate(year = 2017)

h_income_2018 <- get_acs(geography = "place",
              variables = c(medi_house_income = "B19013_001"),
              state = "MD",
              year = 2018) %>% 
  filter(NAME == "Hagerstown city, Maryland") %>% 
  mutate(year = 2018)

h_income_2019 <- get_acs(geography = "place",
              variables = c(medi_house_income = "B19013_001"),
              state = "MD",
              year = 2019) %>% 
  filter(NAME == "Hagerstown city, Maryland") %>% 
  mutate(year = 2019)

h_income_2020 <- get_acs(geography = "place",
              variables = c(medi_house_income = "B19013_001"),
              state = "MD",
              year = 2020) %>% 
  filter(NAME == "Hagerstown city, Maryland") %>% 
  mutate(year = 2020)

h_income_2021 <- get_acs(geography = "place",
              variables = c(medi_house_income = "B19013_001"),
              state = "MD",
              year = 2021) %>% 
  filter(NAME == "Hagerstown city, Maryland") %>% 
  mutate(year = 2021)

h_income <-  bind_rows(h_income_2015, h_income_2016, h_income_2017, h_income_2018, h_income_2019, h_income_2020, h_income_2021)

#Frederick - will likely use 1990 + 2021
#We would like 1990 because that's when the ballpark opened; how do we do this?

f_income_2015 <- get_acs(geography = "place",
              variables = c(medi_house_income = "B19013_001"),
              state = "MD",
              year = 2015) %>% 
  filter(NAME == "Frederick city, Maryland") %>% 
  mutate(year = 2015)

f_income_2016 <- get_acs(geography = "place",
              variables = c(medi_house_income = "B19013_001"),
              state = "MD",
              year = 2016) %>% 
  filter(NAME == "Frederick city, Maryland") %>% 
  mutate(year = 2016)

f_income_2017 <- get_acs(geography = "place",
              variables = c(medi_house_income = "B19013_001"),
              state = "MD",
              year = 2017) %>% 
  filter(NAME == "Frederick city, Maryland") %>% 
  mutate(year = 2017)

f_income_2018 <- get_acs(geography = "place",
              variables = c(medi_house_income = "B19013_001"),
              state = "MD",
              year = 2018) %>% 
  filter(NAME == "Frederick city, Maryland") %>% 
  mutate(year = 2018)

f_income_2019 <- get_acs(geography = "place",
              variables = c(medi_house_income = "B19013_001"),
              state = "MD",
              year = 2019) %>% 
  filter(NAME == "Frederick city, Maryland") %>% 
  mutate(year = 2019)

f_income_2020 <- get_acs(geography = "place",
              variables = c(medi_house_income = "B19013_001"),
              state = "MD",
              year = 2020) %>% 
  filter(NAME == "Frederick city, Maryland") %>% 
  mutate(year = 2020)

f_income_2021 <- get_acs(geography = "place",
              variables = c(medi_house_income = "B19013_001"),
              state = "MD",
              year = 2021) %>% 
  filter(NAME == "Frederick city, Maryland") %>% 
  mutate(year = 2021)

f_income <- bind_rows(f_income_2015, f_income_2016, f_income_2017, f_income_2018, f_income_2019, f_income_2020, f_income_2021)

#Waldorf - need 2008 + 2021
w_income_2021 <- get_acs(geography = "place",
              variables = c(medi_house_income = "B19013_001"),
              state = "MD",
              year = 2021) %>% 
  filter(NAME == "Waldorf CDP, Maryland") %>% 
  mutate(year = 2021)

#Bowie - need 1994 + 2021
bo_income_2021 <- get_acs(geography = "place",
              variables = c(medi_house_income = "B19013_001"),
              state = "MD",
              year = 2021) %>% 
  filter(NAME == "Bowie city, Maryland") %>% 
  mutate(year = 2021)

#Salisbury - need 1996 + 2021
s_income_2021 <- get_acs(geography = "place",
              variables = c(medi_house_income = "B19013_001"),
              state = "MD",
              year = 2021) %>% 
  filter(NAME == "Salisbury city, Maryland") %>% 
  mutate(year = 2021)

#Baltimore - need 1992 + 2021
ba_income_2021 <- get_acs(geography = "place",
              variables = c(medi_house_income = "B19013_001"),
              state = "MD",
              year = 2021) %>% 
  filter(NAME == "Baltimore city, Maryland") %>% 
  mutate(year = 2021)

#Aberdeen - need 2002 + 2021
a_income_2021 <- get_acs(geography = "place",
              variables = c(medi_house_income = "B19013_001"),
              state = "MD",
              year = 2021) %>% 
  filter(NAME == "Aberdeen city, Maryland") %>% 
  mutate(year = 2021)

#Combine all 2021 income
all_income_2021 <-  bind_rows(a_income_2021, ba_income_2021, bo_income_2021, f_income_2021, h_income_2021, s_income_2021, w_income_2021) %>%
  clean_names() %>%
  select(variable, year, name, estimate)

#exporting them to CSV
#write_csv(htown_medi_house_income, file = "htown_medi_house_income.csv")
#write_csv(htown_medi_house_income, file = "fred_medi_house_income.csv")

```

```{r}
### Trying to get poverty data####

B17001_001 #POVERTY STATUS IN THE PAST 12 MONTHS BY SEX BY AGE
get_acs(geography = "place",
              variables = c(poverty_status = "B17001_001"),
              state = "MD",
              year = 2021) %>% 
  filter(NAME == "Hagerstown city, Maryland") %>% 
  mutate(year = 2021)





```


```{r}
## Total Population in Hagerstown and Frederick```{r}

#Hagerstown 
hpop_10 <-  get_acs(geography = "place",
              variables = c(population = "B01003_001"),
              state = "MD",
              year = 2010) %>% 
  filter(NAME == "Hagerstown city, Maryland") %>% 
  mutate(year = 2010)

hpop_11 <-get_acs(geography = "place",
              variables = c(population = "B01003_001"),
              state = "MD",
              year = 2011) %>% 
  filter(NAME == "Hagerstown city, Maryland") %>% 
  mutate(year = 2011)

hpop_12 <- get_acs(geography = "place",
              variables = c(population = "B01003_001"),
              state = "MD",
              year = 2012) %>% 
  filter(NAME == "Hagerstown city, Maryland") %>% 
  mutate(year = 2012)

hpop_13 <- get_acs(geography = "place",
              variables = c(population = "B01003_001"),
              state = "MD",
              year = 2013) %>% 
  filter(NAME == "Hagerstown city, Maryland") %>% 
  mutate(year = 2013)

hpop_14 <- get_acs(geography = "place",
              variables = c(population = "B01003_001"),
              state = "MD",
              year = 2014) %>% 
  filter(NAME == "Hagerstown city, Maryland") %>% 
  mutate(year = 2014)

hpop_15 <- get_acs(geography = "place",
              variables = c(population = "B01003_001"),
              state = "MD",
              year = 2015) %>% 
  filter(NAME == "Hagerstown city, Maryland") %>% 
  mutate(year = 2015)

hpop_16 <- get_acs(geography = "place",
              variables = c(population = "B01003_001"),
              state = "MD",
              year = 2016) %>% 
  filter(NAME == "Hagerstown city, Maryland") %>% 
  mutate(year = 2016)

hpop_17 <-get_acs(geography = "place",
              variables = c(population = "B01003_001"),
              state = "MD",
              year = 2017) %>% 
  filter(NAME == "Hagerstown city, Maryland") %>% 
  mutate(year = 2017)

hpop_18 <- get_acs(geography = "place",
              variables = c(population = "B01003_001"),
              state = "MD",
              year = 2018) %>% 
  filter(NAME == "Hagerstown city, Maryland") %>% 
  mutate(year = 2018)

hpop_19 <- get_acs(geography = "place",
              variables = c(population = "B01003_001"),
              state = "MD",
              year = 2019) %>% 
  filter(NAME == "Hagerstown city, Maryland") %>% 
  mutate(year = 2019)


hpop_20 <- get_acs(geography = "place",
              variables = c(population = "B01003_001"),
              state = "MD",
              year = 2020) %>% 
  filter(NAME == "Hagerstown city, Maryland") %>% 
  mutate(year = 2020)

hpop_21 <- get_acs(geography = "place",
              variables = c(population = "B01003_001"),
              state = "MD",
              year = 2021) %>% 
  filter(NAME == "Hagerstown city, Maryland") %>% 
  mutate(year = 2021)

```


```{r}
#Frederick
fred_10 <-  get_acs(geography = "place",
              variables = c(population = "B01003_001"),
              state = "MD",
              year = 2010) %>% 
  filter(NAME == "Frederick city, Maryland") %>% 
  mutate(year = 2010)

fred_11 <-get_acs(geography = "place",
              variables = c(population = "B01003_001"),
              state = "MD",
              year = 2011) %>% 
  filter(NAME == "Frederick city, Maryland") %>% 
  mutate(year = 2011)

fred_12 <- get_acs(geography = "place",
              variables = c(population = "B01003_001"),
              state = "MD",
              year = 2012) %>% 
  filter(NAME == "Frederick city, Maryland") %>% 
  mutate(year = 2012)

fred_13 <- get_acs(geography = "place",
              variables = c(population = "B01003_001"),
              state = "MD",
              year = 2013) %>% 
  filter(NAME == "Frederick city, Maryland") %>% 
  mutate(year = 2013)

fred_14 <- get_acs(geography = "place",
              variables = c(population = "B01003_001"),
              state = "MD",
              year = 2014) %>% 
  filter(NAME == "Frederick city, Maryland") %>% 
  mutate(year = 2014)

fred_15 <- get_acs(geography = "place",
              variables = c(population = "B01003_001"),
              state = "MD",
              year = 2015) %>% 
  filter(NAME == "Frederick city, Maryland") %>% 
  mutate(year = 2015)

fred_16 <- get_acs(geography = "place",
              variables = c(population = "B01003_001"),
              state = "MD",
              year = 2016) %>% 
  filter(NAME == "Frederick city, Maryland") %>% 
  mutate(year = 2016)

fred_17 <-get_acs(geography = "place",
              variables = c(population = "B01003_001"),
              state = "MD",
              year = 2017) %>% 
  filter(NAME == "Frederick city, Maryland") %>% 
  mutate(year = 2017)

fred_18 <- get_acs(geography = "place",
              variables = c(population = "B01003_001"),
              state = "MD",
              year = 2018) %>% 
  filter(NAME == "Frederick city, Maryland") %>% 
  mutate(year = 2018)

fred_19 <- get_acs(geography = "place",
              variables = c(population = "B01003_001"),
              state = "MD",
              year = 2019) %>% 
  filter(NAME == "Frederick city, Maryland") %>% 
  mutate(year = 2019)


fred_20 <- get_acs(geography = "place",
              variables = c(population = "B01003_001"),
              state = "MD",
              year = 2020) %>% 
  filter(NAME == "Frederick city, Maryland") %>% 
  mutate(year = 2020)

fred_21 <- get_acs(geography = "place",
              variables = c(population = "B01003_001"),
              state = "MD",
              year = 2021) %>% 
  filter(NAME == "Frederick city, Maryland") %>% 
  mutate(year = 2021)



```


```{r}
##Binding the rows 

htown_pop <-  bind_rows(hpop_10, hpop_11, hpop_12, hpop_13, hpop_14, hpop_15, hpop_16, hpop_17, hpop_18, hpop_19, hpop_20, hpop_21)

fred_pop <-  bind_rows(fred_10, fred_11, fred_12, fred_13, fred_14, fred_15, fred_16, fred_17, fred_18, fred_19, fred_20, fred_21)

#exporting them to CSV
write_csv(htown_pop, file = "htown_pop.csv")

write_csv(fred_pop, file = "fred_pop.csv")
```


```{r}

## Waldorf 

Wal_2009 <- get_acs(geography = "place",
          variables = c(medi_house_income = "B19013_001"),
              state = "MD",
              year = 2009) %>% 
  filter(NAME == "Waldorf CDP, Maryland") %>% 
  mutate(year = 2009)
#2009 is the first year the ACS starts

Wal_2021 <- get_acs(geography = "place",
          variables = c(medi_house_income = "B19013_001"),
              state = "MD",
              year = 2021) %>% 
  filter(NAME == "Waldorf CDP, Maryland") %>% 
  mutate(year = 2021)



```

```

```{r}
##Use this section to look at Education Data##

#HS grad (includes equivlency)
htown_hsgrad <-  get_acs(geography = "place",
              variables = c(hsgrad = "B06009_003"),
              state = "MD",
              year = 2021) %>% 
  filter(NAME == "Hagerstown city, Maryland") %>% 
  mutate(year = 2021)

#graduate or professional degree
 get_acs(geography = "place",
              variables = c(gradOprodegree = "B06009_006"),
              state = "MD",
              year = 2021) %>% 
  filter(NAME == "Hagerstown city, Maryland") %>% 
  mutate(year = 2021)

```

