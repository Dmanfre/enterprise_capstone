---
title: "publicly funded stadiums data"
author: "Dylan Manfre"
date: "2023-02-24"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}
#libraries
library(tidyverse)
library(tidycensus)
library(janitor)
library(lubridate)

```

```{r}

rm(list = "baker_contribs", "baker_expenses", "new_gop_expenses", "pa_dem_contribs", "pa_dem_expenses", "pa_gop_contribs", "pa_gop_expesnes", "wbb_rosters")

rm(list = "ACS_5", "htown_2015", "htown_2019", "medi_14", "pa_gop_expenses")


rm(list = "hppop_15")

```


```{r}

# Load Census API key

Sys.setenv(CENSUS_API_KEY = "5cb2b9c628a1d1329c5bf4d36fe4435c6501efc8", overwrite = TRUE)

# is using acs 5'
#when writing this make it say that these numbers are based on five-year rolling averages...


```

```{r}

#Reference tables

#Load ACS crosswalk

ACS_5 <- load_variables(2020, "acs5")
#What is the difference between the ACS and the ACS5?

# List of MD cities
md_cities <- get_acs(geography = "place",
              variables = c(medi_house_income = "B19013_001"),
              state = "MD")

```


```{r}

#MEDIAN HOUSEHOLD INCOME 2021

#Hagerstown - likely need 2021
h_income_2021 <- get_acs(geography = "place",
              variables = c(medi_house_income = "B19013_001"),
              state = "MD",
              year = 2021) %>% 
  filter(NAME == "Hagerstown city, Maryland") %>% 
  mutate(year = 2021)

#Frederick - will likely use 1990 + 2021
#We would like 1990 because that's when the ballpark opened; how do we do this?
f_income_2021 <- get_acs(geography = "place",
              variables = c(medi_house_income = "B19013_001"),
              state = "MD",
              year = 2021) %>% 
  filter(NAME == "Frederick city, Maryland") %>% 
  mutate(year = 2021)

#Waldorf - need 2008 + 2021
w_income_2021 <- get_acs(geography = "place",
              variables = c(medi_house_income = "B19013_001"),
              state = "MD",
              year = 2021) %>% 
  filter(NAME == "Waldorf CDP, Maryland") %>% 
  mutate(year = 2021)


w_income_2009 <- get_acs(geography = "place",
              variables = c(medi_house_income = "B19013_001"),
              state = "MD",
              year = 2009) %>% 
  filter(NAME == "Waldorf CDP, Maryland") %>% 
  mutate(year = 2000)

#Bowie - need 1994 + 2021
bo_income_2021 <- get_acs(geography = "place",
              variables = c(medi_house_income = "B19013_001"),
              state = "MD",
              year = 2021) %>% 
  filter(NAME == "Bowie city, Maryland") %>% 
  mutate(year = 2021)

#Salisbury - need 1996 + 2021
s_income_2021 <- get_acs(geography = "place",
              variables = c(medi_house_income = "B19013_001"),
              state = "MD",
              year = 2021) %>% 
  filter(NAME == "Salisbury city, Maryland") %>% 
  mutate(year = 2021)

#Baltimore - need 1992 + 2021
ba_income_2021 <- get_acs(geography = "place",
              variables = c(medi_house_income = "B19013_001"),
              state = "MD",
              year = 2021) %>% 
  filter(NAME == "Baltimore city, Maryland") %>% 
  mutate(year = 2021)

#Aberdeen - need 2002 + 2021
a_income_2021 <- get_acs(geography = "place",
              variables = c(medi_house_income = "B19013_001"),
              state = "MD",
              year = 2021) %>% 
  filter(NAME == "Aberdeen city, Maryland") %>% 
  mutate(year = 2021)

#Combine all 2021 income
all_income_2021 <-  bind_rows(a_income_2021, ba_income_2021, bo_income_2021, f_income_2021, h_income_2021, s_income_2021, w_income_2021) %>%
  clean_names() %>%
  select(variable, year, name, estimate)

#exporting them to CSV
#write_csv(htown_medi_house_income, file = "htown_medi_house_income.csv")
#write_csv(htown_medi_house_income, file = "fred_medi_house_income.csv")

```

```{r}

# TOTAL POPULATION 2021

#Hagerstown 
h_pop_2021 <- get_acs(geography = "place",
              variables = c(population = "B01003_001"),
              state = "MD",
              year = 2021) %>% 
  filter(NAME == "Hagerstown city, Maryland") %>% 
  mutate(year = 2021)

#Frederick
f_pop_2021 <- get_acs(geography = "place",
              variables = c(medi_house_income = "B01003_001"),
              state = "MD",
              year = 2021) %>% 
  filter(NAME == "Frederick city, Maryland") %>% 
  mutate(year = 2021)

#Waldorf
w_pop_2021 <- get_acs(geography = "place",
              variables = c(medi_house_income = "B01003_001"),
              state = "MD",
              year = 2021) %>% 
  filter(NAME == "Waldorf CDP, Maryland") %>% 
  mutate(year = 2021)

#Bowie
bo_pop_2021 <- get_acs(geography = "place",
              variables = c(medi_house_income = "B01003_001"),
              state = "MD",
              year = 2021) %>% 
  filter(NAME == "Bowie city, Maryland") %>% 
  mutate(year = 2021)

#Salisbury
s_pop_2021 <- get_acs(geography = "place",
              variables = c(medi_house_income = "B01003_001"),
              state = "MD",
              year = 2021) %>% 
  filter(NAME == "Salisbury city, Maryland") %>% 
  mutate(year = 2021)

#Baltimore
ba_pop_2021 <- get_acs(geography = "place",
              variables = c(medi_house_income = "B01003_001"),
              state = "MD",
              year = 2021) %>% 
  filter(NAME == "Baltimore city, Maryland") %>% 
  mutate(year = 2021)

#Aberdeen
a_pop_2021 <- get_acs(geography = "place",
              variables = c(medi_house_income = "B01003_001"),
              state = "MD",
              year = 2021) %>% 
  filter(NAME == "Aberdeen city, Maryland") %>% 
  mutate(year = 2021)

#Combine all 2021 income
all_pop_2021 <-  bind_rows(a_pop_2021, ba_pop_2021, bo_pop_2021, f_pop_2021, h_pop_2021, s_pop_2021, w_pop_2021) %>%
  clean_names() %>%
  select(variable, year, name, estimate)

```

```{r}
### Trying to get poverty data####

B17001_001 #POVERTY STATUS IN THE PAST 12 MONTHS BY SEX BY AGE
get_acs(geography = "place",
              variables = c(poverty_status = "B17001_001"),
              state = "MD",
              year = 2021) %>% 
  filter(NAME == "Hagerstown city, Maryland") %>% 
  mutate(year = 2021)






```

```{r}

B25075_003 == label == Estimate!!Total:!!$10,000 to $14,999


get_acs(geography = "place",
              variables = c(total_home_value = "B25075_003"),
              state = "MD",
              year = 2021) %>% 
  filter(NAME == "Hagerstown city, Maryland") %>% 
  mutate(year = 2021)
```


```{r}



```

```

```{r}
##Use this section to look at Education Data##

#HS grad (includes equivlency)
htown_hsgrad <-  get_acs(geography = "place",
              variables = c(hsgrad = "B06009_003"),
              state = "MD",
              year = 2021) %>% 
  filter(NAME == "Hagerstown city, Maryland") %>% 
  mutate(year = 2021)

#graduate or professional degree
 get_acs(geography = "place",
              variables = c(gradOprodegree = "B06009_006"),
              state = "MD",
              year = 2021) %>% 
  filter(NAME == "Hagerstown city, Maryland") %>% 
  mutate(year = 2021)

```

